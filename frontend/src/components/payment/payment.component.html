<app-navbar></app-navbar>
<section class="payment-section" [class.simple-mode]="simpleMode" [class.large-text]="largeText">
  <div class="container">
    <div class="payment-page-header">
      <button class="back-link" (click)="goBack()">
        <i class="fas fa-arrow-left"></i>
        <span>← Back to Dashboard</span>
      </button>
      <div class="header-content">
        <h1 class="page-title">Make a New Donation</h1>
        <p class="page-subtitle">Every contribution helps us support women and children in crisis</p>
      </div>
      <div class="accessibility-controls">
        <button class="control-btn" [class.active]="simpleMode" (click)="toggleSimpleMode()" aria-label="Toggle Simple Mode">
          <i class="fas fa-magic"></i>
          <span>Simple Mode</span>
        </button>
        <button class="control-btn" [class.active]="largeText" (click)="toggleLargeText()" aria-label="Toggle Large Text">
          <i class="fas fa-text-height"></i>
          <span>Large Text</span>
        </button>
      </div>
    </div>

    <div class="payment-layout">
      <!-- Left Column: Payment Form -->
      <div class="payment-form-column">
        <div *ngIf="!showSuccess" class="payment-form">
          <!-- Payment Information Card -->
          <div class="form-section-card">
            <h3 class="section-title">
              <i class="fas fa-credit-card"></i>
              Payment Information
            </h3>
            
            <div class="form-group">
              <label for="cardNumber">Card Number</label>
              <input
                type="text"
                id="cardNumber"
                [(ngModel)]="cardNumber"
                name="cardNumber"
                placeholder="1234 5678 9012 3456"
                (input)="formatCardNumber()"
                maxlength="19"
                class="form-input"
                required>
            </div>

            <div class="form-group">
              <label for="cardHolder">Card Holder Name</label>
              <input
                type="text"
                id="cardHolder"
                [(ngModel)]="cardHolder"
                name="cardHolder"
                placeholder="John Doe"
                class="form-input"
                required>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="expiryDate">Expiry Date</label>
                <input
                  type="text"
                  id="expiryDate"
                  [(ngModel)]="expiryDate"
                  name="expiryDate"
                  placeholder="MM/YY"
                  (input)="formatExpiryDate()"
                  maxlength="5"
                  class="form-input"
                  required>
              </div>

              <div class="form-group">
                <label for="cvv">CVV</label>
                <input
                  type="text"
                  id="cvv"
                  [(ngModel)]="cvv"
                  name="cvv"
                  placeholder="123"
                  (input)="formatCvv()"
                  maxlength="4"
                  class="form-input"
                  required>
              </div>
            </div>
          </div>

          <!-- Contact Information Card -->
          <div class="form-section-card">
            <h3 class="section-title">
              <i class="fas fa-envelope"></i>
              Contact Information
            </h3>
            
            <div class="form-group">
              <label for="email">Email Address</label>
              <input
                type="email"
                id="email"
                [(ngModel)]="email"
                name="email"
                placeholder="your.email@example.com"
                class="form-input"
                required>
            </div>
          </div>

          <!-- Donate Button -->
          <button type="submit" class="donate-button" (click)="onSubmit()">
            <i class="fas fa-heart"></i>
            <span>Donate {{ getDonationAmountText() }} {{ getRecurringLabel().toLowerCase() }}</span>
          </button>
        </div>

        <!-- Success Message -->
        <div *ngIf="showSuccess" class="success-message">
          <div class="success-icon">
            <i class="fas fa-check-circle"></i>
          </div>
          <h2>Thank You!</h2>
          <p>Your donation of {{ getDonationAmountText() }} has been processed successfully.</p>
          <p>You will receive a confirmation email shortly.</p>
          <div class="success-animation">
            <i class="fas fa-heart"></i>
          </div>
        </div>
      </div>

      <!-- Right Column: Impact & Story -->
      <div class="impact-sidebar">
        <!-- Your Impact Card -->
        <div class="impact-card">
          <h4 class="impact-card-title">Your Impact</h4>
          <div class="impact-amount">{{ getDonationAmountText() }}</div>
          <div class="impact-detail">
            <div class="impact-icon-wrapper">
              <i class="fas fa-balance-scale"></i>
              <img src="https://images.unsplash.com/photo-1517841905240-472988babdf9?w=300&h=300&fit=crop&crop=face" 
                   alt="Impact recipient" 
                   class="impact-image">
            </div>
            <div class="impact-info">
              <h5>{{ getImpactTitle() }}</h5>
              <p>{{ getImpactDescription() }}</p>
            </div>
          </div>
          <div class="impact-frequency">
            <i class="fas fa-info-circle"></i>
            <span>{{ getRecurringLabel().toLowerCase() }} recurring donation</span>
          </div>
        </div>

        <!-- Story of Hope Card -->
        <div class="story-card">
          <div class="story-avatar-wrapper">
            <img src="https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=200&h=200&fit=crop&crop=face" 
                 alt="Story of hope" 
                 class="story-avatar">
            <div class="story-avatar-overlay"></div>
          </div>
          <div class="story-icon">
            <i class="fas fa-heart"></i>
          </div>
          <blockquote class="story-quote">
            "Thanks to donors like you, I found safety and hope when I had nowhere else to turn."
          </blockquote>
          <cite class="story-attribution">— A member of our community</cite>
        </div>

        <!-- Secure Payment Card -->
        <div class="security-card">
          <div class="security-icon">
            <i class="fas fa-lock"></i>
          </div>
          <h5 class="security-title">Secure Payment</h5>
          <p class="security-description">Your donation is encrypted and secure</p>
        </div>
      </div>
    </div>
  </div>
</section>
